<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>[업무자동화] R로 이메일을 보내려면 sendgridr</title>

  <meta property="description" itemprop="description" content="메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2018-10-02"/>
  <meta property="article:created" itemprop="dateCreated" content="2018-10-02"/>
  <meta name="article:author" content="Chanyub Park"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="[업무자동화] R로 이메일을 보내려면 sendgridr"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="[업무자동화] R로 이메일을 보내려면 sendgridr"/>
  <meta property="twitter:description" content="메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","date","categories","description","base_url","author","output","preview"]}},"value":[{"type":"character","attributes":{},"value":["[업무자동화] R로 이메일을 보내려면 sendgridr"]},{"type":"character","attributes":{},"value":["2018-10-02"]},{"type":"character","attributes":{},"value":["R","automation","email","gmail","sendgridr"]},{"type":"character","attributes":{},"value":["메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다.\n"]},{"type":"character","attributes":{},"value":["https://mrchypark.github.io"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["first_name","last_name","url","affiliation","affiliation_url","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Chanyub"]},{"type":"character","attributes":{},"value":["Park"]},{"type":"character","attributes":{},"value":["https://mrchypark.github.io/about"]},{"type":"character","attributes":{},"value":["Forkonlp"]},{"type":"character","attributes":{},"value":["https://forkonlp.github.io/"]},{"type":"character","attributes":{},"value":["0000-0001-6474-2570"]}]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","code_folding","theme","number_sections"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["theme.css"]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["https://user-images.githubusercontent.com/6179259/106548932-49d02200-6553-11eb-9afd-aa6b97a11c13.png"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["업무자동화-r로-이메일을-보내려면-sendgridr_files/anchor/anchor.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/bowser/bowser.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/distill/template.v2.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/header-attrs/header-attrs.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/jquery/jquery-3.6.0.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/jquery/jquery-3.6.0.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/jquery/jquery-3.6.0.min.map","업무자동화-r로-이메일을-보내려면-sendgridr_files/popper/popper.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy-bundle.umd.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy-light-border.css","업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy.css","업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy.umd.min.js","업무자동화-r로-이메일을-보내려면-sendgridr_files/webcomponents/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/header-attrs/header-attrs.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/jquery/jquery-3.6.0.min.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/popper/popper.min.js"></script>
  <link href="업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy.css" rel="stylesheet" />
  <link href="업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy-light-border.css" rel="stylesheet" />
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/tippy/tippy.umd.min.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/anchor/anchor.min.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/bowser/bowser.min.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/webcomponents/webcomponents.js"></script>
  <script src="업무자동화-r로-이메일을-보내려면-sendgridr_files/distill/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"[업무자동화] R로 이메일을 보내려면 sendgridr","description":"메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다.","authors":[{"author":"Chanyub Park","authorURL":"https://mrchypark.github.io/about","affiliation":"Forkonlp","affiliationURL":"https://forkonlp.github.io/","orcidID":"0000-0001-6474-2570"}],"publishedDate":"2018-10-02T00:00:00.000+00:00","citationText":"Park, 2018"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>[업무자동화] R로 이메일을 보내려면 sendgridr</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt=tag">R</div>
<div class="dt=tag">automation</div>
<div class="dt=tag">email</div>
<div class="dt=tag">gmail</div>
<div class="dt=tag">sendgridr</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다. 기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다. sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다.</p></p>
</div>

<div class="d-byline">
  
  true
  
<br/>2018-10-02
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#sendgridr">sendgridr</a></li>
<li><a href="#gmail로-받을-때">gmail로 받을 때</a></li>
<li><a href="#업무자동화에서-메일-보내기란">업무자동화에서 메일 보내기란</a></li>
</ul>
</nav>
</div>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/106548932-49d02200-6553-11eb-9afd-aa6b97a11c13.png"></p>
<h3 id="세줄요약">세줄요약</h3>
<ol type="1">
<li>메일 보내기는 업무 자동화를 위해서 꼭 필요한 기능이다.</li>
<li>기존의 패키지인 mailR, sendmailR은 자바 의존성이 있거나 smtp 서버를 활용하는 형태이다.</li>
<li>sendgrid 서비스가 매일 100건 평생 무료로 준대서 패키지를 만들어봤다.</li>
</ol>
<p><strong>업무 자동화</strong>는 매우 매력적인 키워드입니다. 세상에 내가 하는 일을 컴퓨터가 대신 하게 해준다니! 여러 가지 작업을 코딩할 수 있겠지만, R의 장점은 결과에 대한 보고서 딜리버리라고 생각합니다. 전달의 완성은 역시 이메일이죠! 물론 최근에는 슬랙같은 도구도 많이 사용하기 때문에 <a href="https://github.com/hrbrmstr/slackr">slackr</a>같은 도구가 더 좋을 수 도 있을 것 같습니다.</p>
<p>그래도 역시 이메일이지! 라고 생각하는 분들을 위해 R로 이메일을 보내는 법을 좀 찾아봤습니다. 대체 최근 스타일의 메일 보내는 도구가 없더군요. 가장 잘 관리되고 있는 패키지는 <a href="https://github.com/rpremraj/mailR">mailR</a> 이었습니다. 문제는 두 가지 허들이 있더군요.</p>
<p>하나는 아파치 지원 프로젝트인 <a href="http://commons.apache.org/proper/commons-email/">commons</a>을 사용한다는 점 이었습니다. 이게 java라 rJava가 필요하죠. rJava는 지난 포스트인 <a href="https://mrchypark.github.io/post/rtips-windows%EC%97%90%EC%84%9C-rjava-%EC%8A%A4%ED%8A%B8%EB%A0%88%EC%8A%A4-%EC%97%86%EC%9D%B4-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/">Windows에서 rJava 스트레스 없이 설치하기</a>를 참고해주세요. <a href="https://medium.com/@randerson112358/send-email-using-r-program-1b094208cf2f">이곳</a>에 훌륭한 튜토리얼이 있습니다.</p>
<p>다른 문제는 smtp 서버를 사용한다는 점입니다. 많이 사용하는 gmail의 smtp 서버를 사용하려면 위의 <a href="https://medium.com/@randerson112358/send-email-using-r-program-1b094208cf2f">튜토리얼</a>에서도 google 서비스 접근에 대한 보안 수준을 낮춰야 한다고 알려주고 있습니다. 그렇다고 smtp 서버를 직접 구축할 수 도 없는 노릇인거죠.</p>
<figure>
<img width=100% src="https://user-images.githubusercontent.com/6179259/46360487-8602c780-c6a6-11e8-8df1-32db16e3a6b7.png">
<figcaption>
보안 수준을 낮춰야 한다니… 불안하기만 하다
</figcaption>
</figure>
<p>대신 안정적으로 동작하는 패키지라는 걸 아파치의 지원 프로젝트를 활용하기 때문에 신뢰할 수 있습니다. 2016년이 마지막 업데이트인데요. 메일 기능이 더 업데이트 할 만한게 뭐가 있을까 싶기도 합니다.</p>
<p>두 번째로 조금 더 오래됬지만, 매달 5,000 다운로드가 발생하는 대중적인 패키지로 <a href="https://github.com/olafmersmann/sendmailR">sendmailR</a>이 있습니다. 거의 같은 사용성을 보여주고 있는데요. 이건 감사하게도 java 의존성 같은게 없는 훨씬 단순한 구조입니다. 역시나 허들은 smtp 메일 서버가 있어야 한다는 점입니다.</p>
<p>그래서 뭔가 api로 메일 전송 서비스를 제공해주는 곳이 어디 없나 찾아봤습니다.</p>
<figure>
<img width=100% src="https://user-images.githubusercontent.com/6179259/46359659-a762b400-c6a4-11e8-91fb-1219ce2b6842.png">
<figcaption>
메일 전송 api를 제공해주는 서비스들
</figcaption>
</figure>
<p><a href="https://mailchimp.com/">mailchimp</a>는 세상 유명한 서비스입니다. 이메일 마케팅을 하시는 분들이라면 잘 활용하면 좋을 서비스이지요. <a href="https://www.sendinblue.com/">sendinblue</a>, <a href="https://sendgrid.com/">sendgrid</a> 모두 경쟁사입니다.</p>
<p>제가 찾는 api는 이메일을 보낼 수 있으면 충분합니다. 세 서비스 중에 가장 일별 무료 전송량이 적지만(일 100건), api가 단순한 서비스는 sendgrid 였습니다.</p>
<figure>
<img width=100% src="https://user-images.githubusercontent.com/6179259/46363315-9cf8e800-c6ad-11e8-86f4-1d62c91b22a1.png">
<figcaption>
낙점!
</figcaption>
</figure>
<h2 id="sendgridr">sendgridr</h2>
<p>이제 sendgrid api의 wrapper 패키지인 sendgridr을 소개합니다.</p>
<p><a href="https://mrchypark.github.io/sendgridr/"><img width=30% src="https://github.com/mrchypark/sendgridr/raw/master/man/figures/logo.png"></a></p>
<p>sendgridr은 크게 2가지 기능을 담당합니다.</p>
<h3 id="sendgrid-api-키-등록-및-확인">1. sendgrid api 키 등록 및 확인</h3>
<p>우선 sendgrid를 이용에 메일을 보내기 위해서는 당연히도 회원가입을 해야 합니다.</p>
<h4 id="sendgrid-회원가입">sendgrid 회원가입</h4>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367169-e2221780-c6b7-11e8-9a77-433966b434b3.png"></p>
<p>우선 <a href="https://sendgrid.com/">sendgrid 홈페이지</a>로 가주세요. Sign up 버튼을 누르면 어떤 플랜을 선택할지 물어봅니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367245-0aaa1180-c6b8-11e8-8b51-5ceeb708ae74.png"></p>
<p>우리는 당연히 <strong>free</strong> 플랜을 선택합니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367567-e438a600-c6b8-11e8-8a88-9b6acc8074a1.png"></p>
<p>이제야 익숙한 아이디, 비번, 이메일을 입력하라고 하는군요.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367634-12b68100-c6b9-11e8-9661-4ada41f93926.png"></p>
<p>기업 고객 유치를 위해서 추가 정보를 요구합니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367676-337ed680-c6b9-11e8-9c74-6dc488267ba0.png"></p>
<p>서비스에겐 미안하지만 아무 정보나 입력했습니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46367936-e3544400-c6b9-11e8-8dcf-66963d261d6b.png"></p>
<p>드디어 회원가입을 끝냈습니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46368011-10085b80-c6ba-11e8-869c-2e09247311f0.png"></p>
<p>서비스를 사용하기 위해서는 이메일을 확인해야 합니다. 가입때 사용한 이메일에 들어가보면 확인 메일이 와있을 텐데요.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46369531-4051f900-c6be-11e8-80b7-1947a049b613.png"></p>
<p><em>Confirm Email Address</em> 버튼을 눌러서 계정을 활성화해 주세요.</p>
<h4 id="api-key-발급">api key 발급</h4>
<p>우선 패키지를 설치해보겠습니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># remotes::install_github("mrchypark/sendgridr")</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/mrchypark/sendgridr'>sendgridr</a></span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>이제 api 서비스를 사용하기 위해 api key를 발급받아 보겠습니다. <a href="#sendgridr">sendgridr</a> 패키지는 <code>auth_set()</code> 함수를 이용해 키를 등록합니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370095-aee38680-c6bf-11e8-96ba-211cb0f01640.png"></p>
<p>영어로 질문이 나오면서 3가지 선택지가 나오는데요. No에 해당하는 것 2개와 Yes에 해당하는것 1개가 다양한 표현으로 나옵니다. 생각없이 선택하는 걸 방지하려고 이런 설계를 한 모양이네요.(읭? usethis 함수를 사용한 겁니다. ㅋㅋ)</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370145-d0447280-c6bf-11e8-96ce-783ea220a7fe.png"></p>
<p>이미 api key가 있냐고 물어보네요. 저는 아니오에 해당하는 1을 입력하겠습니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370301-35986380-c6c0-11e8-88da-101217cd135b.png"></p>
<p>그럼 api key를 신청할 수 있는 페이지를 열어줍니다! 제 스크린샷에는 이미 2개의 키가 만들어져 있지만, 여러분은 아마도 비어있을 것입니다. 우선 rstudio에서의 작업을 마저하도록 할까요?</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370339-5496f580-c6c0-11e8-8761-51e3efe9e4cb.png"></p>
<p>2번째 질문이 나옵니다. 이제 등록해야 할 api key를 R 사용 환경 전체에서 쓸 것인지, 현재 프로젝트에서만 사용할 것인지 물어봅니다. rstudio는 project라는 관리 단위를 나누는 기능을 제공합니다. 잘 모르신다면 yes를 선택하시고, 아신 다면 상황에 맞게 선택해주세요. 저는 yes에 해당하는 3번을 입력했습니다. 계속 yes의 위치가 바뀌니 화면을 따라 3을 입력하지 마시고, 선택지를 잘 확인해주세요.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370362-6082b780-c6c0-11e8-82b8-57782fbd681e.png"></p>
<p><code>sendgridr</code> 패키지는 api key를 <code>.Renviron</code> 파일에 관리하는 것을 권장합니다. <code>.Renviron</code> 파일은 R의 환경 변수를 기록하고 <code>Sys.getenv()</code> 함수로 값을 사용할 수 있게 해줍니다. 변수명은 <code>SENDGRID_API</code>로 기록하면 되는군요. 이제 다시 브라우저로 돌아가서 key를 만들어 볼까요?</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370301-35986380-c6c0-11e8-88da-101217cd135b.png"></p>
<p>오른쪽 위에 Create API Key를 클릭합니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370542-d129d400-c6c0-11e8-93ee-0071a1a2e2a0.png"></p>
<p>key를 관리할 이름을 정합니다. 저는 그냥 test라고 작성했습니다. 권한는 <strong>Full Access</strong>로 설정해주세요.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370602-f4ed1a00-c6c0-11e8-9bca-12d2ed999811.png"></p>
<p>api key를 발급받았습니다! 매우 긴 문자열로 이걸 복사해서 아까 <code>.Renviron</code> 파일에 저장하면 되겠네요. 글자를 클릭하면 자동으로 복사를 수행해 줍니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370623-02a29f80-c6c1-11e8-8cb6-da36adebc306.png"></p>
<p>복사를 해야만, 다음 화면으로 넘어갈 수 있군요. 참고로 지금 한번 알려주고 끝입니다. 복구고 뭐고 아예 없어요. 대신 지우고 새로 만들면 됩니다. ㅎㅎ 저도 맘편히 스크린샷에 공개했는데요. 진작에 지웠습니다.</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370663-2534b880-c6c1-11e8-8f6b-668db34dbe9b.png"></p>
<p><code>.Renviron</code> 파일에 저장한 모습입니다. 이 파일을 저장하고 나면 적용하기 위해서 R session을 재시작해야 합니다. rstudio를 껏다가 켜도 좋고, Ctrl+Shift+F10을 입력해도 됩니다. 저는 <code>rstudioapi::restartSession()</code> 함수로 재시작했습니다. 이제 잘 동작하는지 확인해 볼까요?</p>
<p><img width=100% src="https://user-images.githubusercontent.com/6179259/46370758-793f9d00-c6c1-11e8-9f0f-b177513fa0b7.png"></p>
<p><code>auth_check()</code> 함수는 api key가 잘 등록되어 있는지, 동작하는 키인지 서비스에 확인하는 작업을 합니다. 잘 동작한다니 드디어 key 설정을 완료했습니다!</p>
<h3 id="mail-작성-및-보내기">2. mail 작성 및 보내기</h3>
<p>sendgrid는 mail에 대한 정보를 <em>json</em> 형태로 받습니다. 막상 양식에 맞는 형태로 작성하려고 하면 불편한 부분이 있더라구요. <code>sendgridr</code> 패키지는 <code>mail()</code>, <code>to()</code>, <code>cc()</code>, <code>from</code> 등 메일을 보내기 위한 정보를 구성하는 함수들을 제공하고 있습니다. <a href="https://mrchypark.github.io/sendgridr/reference/index.html">여기</a>에서 어떤 것을 제공하는지 확인해보세요.</p>
<p>파이프 연산자<code>%&gt;%</code>를 지원할 수 있게 작성하려고 노력했습니다.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/mrchypark/sendgridr'>sendgridr</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/mail.html'>mail</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/from.html'>from</a></span><span class='op'>(</span><span class='st'>"example1@mail.com"</span>, <span class='st'>"example name for display"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/address.html'>to</a></span><span class='op'>(</span><span class='st'>"example2@mail.com"</span>, <span class='st'>"example name for display 2"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/subject.html'>subject</a></span><span class='op'>(</span><span class='st'>"test mail title"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>content</span><span class='op'>(</span><span class='st'>"hello world!"</span><span class='op'>)</span>  <span class='op'>%&gt;%</span> 
  <span class='co'>## attachments is optional</span>
  <span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/attachments.html'>attachments</a></span><span class='op'>(</span><span class='st'>"report.html"</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://rdrr.io/pkg/sendgridr/man/send.html'>send</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>테스트 할 때는 한글도 문제없이 동작하는 것을 확인했습니다. 전송이 잘 이루어진다면 위 코드를 수행했을 때 <code>NULL</code>이 출력될 것입니다. 혹시 <code>NULL</code>이외의 출력(대부분 에러 메세지입니다.)이 나오면 <a href="https://github.com/mrchypark/sendgridr/issues/new">여기</a>에 알려주세요.</p>
<h2 id="gmail로-받을-때">gmail로 받을 때</h2>
<p>회사에서 G Suits를 사용하고 있다보니 회사 메일이 gmail 입니다. 메일의 body 부분(패키지에서는 content)에 html로 전송을 지원하길래 시도해봤는데요. rmd로 만든 html 파일을 사용하니, 삽입된 그림은 막고, 여러 스타일을 제거해서 보여주는 것을 확인했습니다. 아직은 사용하기 어렵겠네요.ㅜㅠ 우선은 첨부파일로 해결이 가능할 것 같기는 한데요. 메일 본문에 요약된 내용을 추가하는 방법을 찾아봐야 할 것 같습니다.</p>
<p>첨부하는 파일 확장자를 rmd로 받고, rendering과 후처리를 패키지내에 포함하는 것이 좋겠네요.</p>
<h2 id="업무자동화에서-메일-보내기란">업무자동화에서 메일 보내기란</h2>
<p>업무 자동화는 데이터 소스의 접근, 처리, 보고서 생성, 전달, 스케줄러 등 다양한 기능을 해야 합니다. 그 중에 메일 보내기는 최종 단계로 꼭 필요하다고 할 수 있죠. 회사에서 smtp 서버를 운용하는 중이라면 <code>sendmailR</code> 패키지가 좋은 선택일 것입니다. 스케줄러로 정기적으로 메일을 보내게도 할 수 있을 것이구요. 이렇게 업무자동화에 도움이 되는 패키지들을 만들거나 소개하는 것을 좀 해봐야 겠습니다.</p>
<p>언제나처럼 문의, 오타 제보 등 대환영입니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
